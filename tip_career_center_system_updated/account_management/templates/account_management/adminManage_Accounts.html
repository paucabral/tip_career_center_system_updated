{% extends 'template.html' %}
{% load static %}
    {% block content %}
        <div class="container-fluid parallax1" style="padding-left:20px;padding-right:20px">
        <div class="row">
          <div class="col" style="background-color:rgba(175, 175, 175, 0.7);padding-left:75px;padding-right:75px;padding-top:50px;padding-bottom:50px">
          <div class="table-responsive">
                    <!--<h1>Main page test</h1>
                    <p>index @ "--blank--" url pattern is working</p>-->
                        <table id="tableID" class="display nowrap dataTable dtr-inline collapsed" width="50%">
                          <thead>
                            <tr>
                              <th colspan="8" style="text-align:center;color:#1e1e1e">Manage Accounts</th>
                            </tr>
                            <tr >
                              <th>ID</th>
                              <th>Username</th>
                              <th></th>
                            </tr>
                          </thead>
                          <tbody>
                              {% for c in accounts %}
                                <tr>
                                  <td>{{ c.id }}</td>
                                  <td>{{ c.username }}</td>
                                  <td>
                                        <i class="button edit" data-toggle="modal" data-target="#editmodal{{c.id}}" id="editbtn" name="editbtn" value="1"><img width="30" height="30" src="{% static 'img/edit.png' %}"></a></i>
                                        <!-- <i class="button edit"><a href="/company-management/administrator/delete-company/{{ c.company_id }}">Delete</a></i> -->
                                        <i class="button delete" data-toggle="modal" data-target="#deletemodal{{c.id}}" id="deletebtn" name="deletebtn" value="1"><img width="30" height="30" src="{% static 'img/delete.png' %}"></i>
                                        <div class="modal fade" id="deletemodal{{c.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="false">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                              <div class="modal-content"  style="width:1000px">
                                                <div class="modal-header">
                                                  <h5 class="modal-title" id="exampleModalLabel">Delete Account</h5>
                                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                  </button>
                                                </div>
                                                <div class="modal-body">
                                                  Are you sure you want to delete this account?
                                                </div>
                                                <div class="modal-footer">
                                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                                  <form method="POST">{% csrf_token %}<button type="submit" name="ActionBTN" value="1" class="btn btn-danger">Delete</button><input type="hidden" name="DeleteID" value="{{c.id}}" /></form>
                                                </div>
                                              </div>
                                            </div>
                                        </div>
                                        <div class="modal fade" id="editmodal{{ c.id }}" style="margin-top:20px;overflow:unset;" tabindex="-1" role="dialog" aria-labelledby="true" data-backdrop="false" data-keyboard="false">
                                                <form method="POST" enctype="multipart/form-data">{% csrf_token %}
                                                <div class="modal-dialog cascading-modal modal-dialog-centered modal-xl" style="width:40%" role="document">
                                                    <div class="modal-content" style="width:100%">
                                                        <div class="modal-header">
                                                            <div style="position:relative; left:45%; font-weight:bold;">
                                                                Modify Account
                                                            </div>
                                                                <button type="button" style="float:right" class="close" data-dismiss="modal" aria-label="Close">
                                                                        <span aria-idden="true">&times;</span>
                                                                </button>
                                                        </div>
                                                        <div class="modal-tabs"> 
                                                            <div class="tab-content" style="padding:20px">
                                                            <div class="tab-pane fade in active show" id ="change_user" role="tabpanel"> 
                                                                    <div class="tab-content">
                                                                        <div class="form-row">
                                                                            <div class="col-lg-6">
                                                                                <div class="form-group">
                                                                                    <input type="text" id="changeuser" name="changeuser_{{c.id}}" class="form-control input-lg"/>
                                                                                  <label for="changeuser">Enter New Username </label>
                                                                                </div>
                                                                            </div>           
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane fade in active show" id ="Modify_ID" role="tabpanel"> 
                                                                    <div class="tab-content">
                                                                        <div class="form-row">
                                                                            <div class="col-lg-6">
                                                                                <div class="form-group">
                                                                                    <input type="hidden" id="Modify_ID" name="DeleteID" value="{{c.id}}" />
                                                                                </div>
                                                                            </div>           
                                                                        </div>
                                                                    </div>
                                                                  </div>
                                                            <div class="tab-pane fade in active show" id ="change_password" role="tabpanel"> 
                                                                <div class="tab-content">
                                                                    <div class="form-row">
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group">
                                                                              <input type="password" id="changepassword" name="changepassword_{{c.id}}" class="form-control input-lg"/>
                                                                                <label for="changepassword">
                                                                                  Enter New Password
                                                                                </label>
                                                                            </div>
                                                                        </div>           
                                                                    </div>
                                                                    <button type="submit" style="float:right;margin-bottom:1%;" class="btn btn-warning" name="ActionBTN" value="2">Submit</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                </form>
                                            </div>
                                    </td>
                                </tr>
                              {% endfor %}
                              <a href="/register"><button  class="btn btn-warning" style="float:right">Register New User</button></a>
                          </tbody>
                      </table>
            </div>
            </div>
          </div>
            <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
            <script type="text/javascript" src="{% static 'js/datatables.min.js' %}"></script>
            <script>
                $(document).ready( function () {
                $('#tableID').DataTable();
            } );
            </script>
        </div>
    
    {% endblock %}

   